<ion-header class="header-bg">
  <ion-toolbar class="transparent">
    <ion-title class="user-name">Messages</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-content">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="refresh-outline"
      pullingText="Pull to refresh"
      refreshingSpinner="bubbles"
    >
    </ion-refresher-content>
  </ion-refresher>
  <ion-list class="users-list" *ngIf="usersList; else loading">
    <ng-container *ngIf="usersList.length > 0; else noData">
      <ng-container *ngFor="let user of usersList">
        <ion-item
          detail="false"
          button
          routerLink="/tabs/messages/{{user.uid}}"
        >
          <div class="user">
            <div class="user-avatar">
              <ion-avatar class="avatar-bg">
                <img
                  [src]="user.picture_thumbnail || './assets/images/download.jpg'"
                />
              </ion-avatar>
            </div>
            <div class="user-detail">
              <div class="name">{{user.fname}} {{user.lname}}</div>
              <div class="desc">{{user.userType}}</div>
            </div>
          </div>
        </ion-item>
      </ng-container>
    </ng-container>
  </ion-list>
</ion-content>

<ng-template #loading>
  <ion-list class="users-list">
    <ion-item detail="false">
      <div class="user">
        <div class="user-avatar">
          <ion-avatar class="avatar-bg">
            <ion-skeleton-text
              style="border-radius: 100%; height: 55px; width: 55px"
            ></ion-skeleton-text>
          </ion-avatar>
        </div>
        <div class="user-detail">
          <div class="name">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 20px;
                width: 200px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
          <div class="desc">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 14px;
                width: 100px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-item>
    <ion-item detail="false">
      <div class="user">
        <div class="user-avatar">
          <ion-avatar class="avatar-bg">
            <ion-skeleton-text
              style="border-radius: 100%; height: 55px; width: 55px"
            ></ion-skeleton-text>
          </ion-avatar>
        </div>
        <div class="user-detail">
          <div class="name">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 20px;
                width: 200px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
          <div class="desc">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 14px;
                width: 100px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-item>
    <ion-item detail="false">
      <div class="user">
        <div class="user-avatar">
          <ion-avatar class="avatar-bg">
            <ion-skeleton-text
              style="border-radius: 100%; height: 55px; width: 55px"
            ></ion-skeleton-text>
          </ion-avatar>
        </div>
        <div class="user-detail">
          <div class="name">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 20px;
                width: 200px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
          <div class="desc">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 14px;
                width: 100px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-item>
    <ion-item detail="false">
      <div class="user">
        <div class="user-avatar">
          <ion-avatar class="avatar-bg">
            <ion-skeleton-text
              style="border-radius: 100%; height: 55px; width: 55px"
            ></ion-skeleton-text>
          </ion-avatar>
        </div>
        <div class="user-detail">
          <div class="name">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 20px;
                width: 200px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
          <div class="desc">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 14px;
                width: 100px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-item>
    <ion-item detail="false">
      <div class="user">
        <div class="user-avatar">
          <ion-avatar class="avatar-bg">
            <ion-skeleton-text
              style="border-radius: 100%; height: 55px; width: 55px"
            ></ion-skeleton-text>
          </ion-avatar>
        </div>
        <div class="user-detail">
          <div class="name">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 20px;
                width: 200px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
          <div class="desc">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 14px;
                width: 100px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-item>
    <ion-item detail="false">
      <div class="user">
        <div class="user-avatar">
          <ion-avatar class="avatar-bg">
            <ion-skeleton-text
              style="border-radius: 100%; height: 55px; width: 55px"
            ></ion-skeleton-text>
          </ion-avatar>
        </div>
        <div class="user-detail">
          <div class="name">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 20px;
                width: 200px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
          <div class="desc">
            <ion-skeleton-text
              style="
                border-radius: 2px;
                height: 14px;
                width: 100px;
                margin-bottom: 5px;
              "
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-item>
  </ion-list>
</ng-template>

<ng-template #noData>
  <ion-text color="dark">
    <p>No records found.</p>
  </ion-text>
</ng-template>
